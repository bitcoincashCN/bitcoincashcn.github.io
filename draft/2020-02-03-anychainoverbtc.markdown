---
layout: post
title:  "一种基于比特币网络的造链系统设计"
date:   2020-02-03
categories: 比特币理论研究
tags: BTC 理论研究 侧链 闪电网络 多层网络 技术堆栈 合并挖矿
---

* content
{:toc}

# 概述

本文提出一种方法，将绝大部分采用独立共识层的区块链项目（非Token通证项目）与比特币网络进行合并挖矿，进而解除共识层的研发和维护负担，使项目可以在上层展开更加敏捷和丰富的功能开发。该分叉类型与现有独立共识层的链条可以并存，作为测试网络或者不同实现路线而存在。并存的分叉将通过市场的考验，市场会逐步优选出出最适合项目的共识层实现模式，可合可分，不同实现模式也可能会长期并存。

类似的真实例子其实已经存在，狗狗币在一开始拒绝与莱特币合并挖矿，而后走入生存的困局，社区决定放下共识层维护的负担，接受并实现与莱特币合并挖矿之后，狗狗币的社区继续存续及发展。RSK作为比特币的侧链，是一个无币区块链项目，与比特币合并挖矿，提供了智能合约功能的扩展以及30秒的出块间隔，并为矿池矿工增加每个月4.8万美元的手续费收益。

与比特币合并挖矿貌似不适合以“取代或超越比特币”为目标的项目（而且以此为卖点），但实质上大量的项目在归零后，普遍意识到存活下去是实现其理想和目标的必要基础条件，在壮大和发展过程中，需要先保障自身的可靠存在。

# 一、PoW共识层的困局

## 1.PoW生态的马太效应

PoW（工作量证明）共识方法（机制）由中本聪所创造，即通过“算力挖矿”进行铸币，这种方法被各种主流币所采用，比如ETH、LTC、BCH等。PoW共识方法，由算力、矿池、矿工组成，所实现的安全并非由代码保证，而是由以下因素综合决定：

* 有足够大的总算力：即经济门槛，算力成本决定攻击门槛。
* 算力足够去中心化：即算力离散化，不由少数人完全把控的算力。
* 算法安全：即算法本身对所用人需要是公平的，如某些CPU挖矿算法被FPGA或GPU化破解。

维护一个健壮的PoW共识层，绝不仅仅是代码和算法开发，而是需要形成很良好的生态：

* 有足够多矿工
* 有足够多的易于获得挖矿设备
* 有足够多的矿池
* 有足够多的专业化矿场
* 有足够多的矿机算法芯片研发厂商
* 满足以上条件的规模化经济效益

而目前只有比特币拥有最齐备的PoW共识层生态，遍布全球部署超过400万台比特币的矿机，其它的PoW币种，除了少数头部品种，普遍存在算力集中化、缺乏专业挖矿设备、没有规模化经济效益等情况。很多新的公链都在采用PoS/DPoS或研究新的共识办法，包括ETH也在计划将共识层往PoS方向进行转换。

但是，请注意，比特币所采用的PoW共识办法， 是到目前为止被大规模证明最可靠的共识办法，其它所有“新型"的共识办法，均存在显而易见的治理弊端和安全威胁，以及没有得到市场的最广泛认可，开发者经常陷入共识层问题的长期拉锯和消耗。

所以，直接采用比特币的共识层办法，使用合并挖矿模式，共享利用比特币构建起来的共识层生态，是开发区块链项目一种可选的方法。

## 2.不可能的三角

由Vitalik Buterin提出，表明区块链系统最多只能拥有以下三个属性中的两个：

* 去中心化（定义为系统可以在每个参与者只能访问O(c)资源的场景下运行）
* 扩展性（定义为可以处理O(n) > O(c)交易）
* 安全性（定义为最多使用O(n)资源就可以抵御安全攻击）

将这个“不可能的三角”套用在比特币上，可以找出一些具体的例子：

* 区块太大会提高节点成本，并且不利于节点的同步和收敛（扩展性和去中心化矛盾）
* 大量的分散化节点进行挖矿，要求区块不能太大以免影响同步产生孤块（安全性和扩展性矛盾）

基本上，比特币放弃了很多的扩展性，以实现最强的安全性和去中心化。

将这个“不可能的三角”套用在以太坊上，可以找出一些具体的例子：

* 大量的Token基于以太坊主链造成主链庞大（安全性和扩展性矛盾）
* GPU挖矿的专业化要求，造成算力集中化（去中心化和安全性矛盾）

比特币和以太坊作为PoW共识方法的典型代表，很可以说明这个问题。这个不可能的三角其实有很多优化的复杂解法：

* 分片，以太坊已经研究出多个版本的分片方案
* 通道策略（比如，闪电网络），即二层扩展交易容量，但不扩展状态容量。
* 子链，采用跨链协议，多链并存。
* 高级密码学解法（如Mimblewimble协议和基于ZK-SNARKs的策略）。

这些解法的研究和实践是很多的，但因为理解起来都是很复杂的，而且也存在各式各样的问题，大都是理论层面的证明，未必有经过大规模的部署和验证，所产生的效果以及市场对此的认可度并不明显。

除了复杂的方式优化不可能的三角，也有简单的方法：

* 独立的链条，也就是各种互不关联的链条，也可以视为一种扩展的实现。
* 增加区块大小。
* 合并挖矿，采取合并挖矿方式，使多链条共享底层安全并实现灵活扩展。

这些方法也都有具体的实践。本文通过分层的重构设计，尝试将简单和复杂的办法进行综合，融合吸收各种办法的优势，以对不可能的三角的问题进行优化，形成新的实践。

## 3.PoW区块链难以生存的原因

### 3.1.易于形成算力中心化



### 3.2.死亡螺旋的问题

### 3.3.缺乏算力安全的标准

### 3.4.抗ASIC的迷思

# 二、突破PoW共识层困局的解决方案

## 1.与比特币共享算力的合并挖矿

### 1.1.共享比特币算力安全

通过合并挖矿技术可以实现共享比特币的算力安全，将节点共识层的研发和维护需求全部解除，并且可以同时兼顾节点的去中心化、算力安全、可扩展性。

比特币拥有最安全、最健壮的共识层，以及最丰富的共识层生态：

* 超过十家的比特币算法芯片研发商
* 全球超过400万台比特币矿机的部署
* 专业化矿池几十家
* 消耗过剩电力或处于极寒地带的大量矿场
* 丰富的算力产品和金融衍生品

任何一种PoW“矿币"依靠自身的力量，在发展共识层生态上均举步维艰，不易生存，直接利用比特币的共识层生态，是现实的选择之一。

### 1.2.保持独立链条数据

### 1.3.简单的无限吞吐量扩展

### 1.4.从共识层困局中解脱

### 1.5.使算力更加去中心化


## 2.可持续扩展的矿池系统

### 2.1.模块化的矿池系统

矿池系统由以下功能模块组成：

** Solo比特币的


### 2.2.造链接口标准

### 2.3.矿池的收费模式

### 2.4.算力分配功能

### 2.5.

## 3.节点工程

### 3.1.无币区块链 over PoW

### 3.2.PoS/DPoS over PoW

### 3.3.其它BFT容错协议 over PoW




# 三、方案适用场景

## 1.合并比特币与以太坊的共识层

## 2.合并比特币与其它分叉币的共识层

## 3.构建比特币单向/双向通道

## 4.构建无币区块链

## 5.小型矿币的启动

## 6.区块链的P2P应用


# 四、开发者社区的构成

## 矿池系统开发主体



## 分叉链条的开发维护


## 


